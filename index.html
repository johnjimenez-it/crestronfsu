<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FSU Classroom Control</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #782F40;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: #572932;
            color: white;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .fsu-logo {
            height: 40px;
            width: auto;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .time {
            font-size: 16px;
            opacity: 0.9;
        }

        .help-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            color: white;
            font-size: 14px;
        }

        .help-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .help-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .help-modal.show {
            display: flex;
        }

        .help-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
        }

        .help-content::-webkit-scrollbar {
            width: 8px;
        }

        .help-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .help-content::-webkit-scrollbar-thumb {
            background: #782F40;
            border-radius: 4px;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #782F40;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: #5a2330;
            transform: scale(1.1);
        }

        .help-content h2 {
            color: #782F40;
            margin-bottom: 15px;
            font-size: 24px;
        }

        .help-content h3 {
            color: #782F40;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .help-content p {
            color: #333;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .help-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .help-content li {
            color: #333;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .help-content strong {
            color: #782F40;
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 15px;
            overflow: hidden;
        }

        .preview-section {
            background: rgba(0, 0, 0, 0.85);
            border-radius: 15px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            flex: 0 0 auto;
            height: 280px;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .preview-label {
            color: white;
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .audio-indicator {
            background: rgba(40, 167, 69, 0.2);
            border: 2px solid #28a745;
            color: #28a745;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .preview-container {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .preview-screen {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            padding: 15px;
            position: relative;
            overflow: hidden;
        }

        .preview-screen.active {
            border-color: #28a745;
            box-shadow: 0 0 20px rgba(40, 167, 69, 0.3);
        }

        .screen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .screen-title {
            color: white;
            font-size: 13px;
            font-weight: bold;
        }

        .screen-status {
            color: rgba(255, 255, 255, 0.5);
            font-size: 11px;
        }

        .screen-source {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: rgba(255, 255, 255, 0.3);
            font-size: 14px;
        }

        .control-panel {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            flex: 0 0 auto;
        }

        .control-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .control-section.sources {
            grid-column: span 3;
        }

        .control-section.display {
            grid-column: span 2;
        }

        .control-section.camera {
            grid-column: span 1;
        }

        .control-section.audio {
            grid-column: span 2;
        }

        .control-section.volume {
            grid-column: span 2;
        }

        .control-section.power {
            grid-column: span 1;
        }

        .section-title {
            color: #782F40;
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .button-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
        }

        .button-grid.triple {
            grid-template-columns: repeat(3, 1fr);
        }

        .button-grid.single {
            grid-template-columns: 1fr;
        }

        .control-btn {
            background: white;
            border: 2px solid #782F40;
            border-radius: 8px;
            padding: 6px;
            font-size: 9px;
            font-weight: 600;
            color: #782F40;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .control-btn:hover {
            background: #782F40;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(120, 47, 64, 0.3);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .control-btn.active {
            background: #782F40;
            color: white;
        }

        .control-btn.disabled {
            opacity: 0.4;
            cursor: not-allowed;
            pointer-events: none;
        }

        .icon {
            font-size: 18px;
            order: 2;
        }

        .control-btn span:not(.icon) {
            order: 1;
        }

        .display-controls {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .display-group {
            display: flex;
            gap: 6px;
        }

        .display-group .control-btn {
            flex: 1;
        }

        .group-label {
            font-size: 10px;
            font-weight: bold;
            color: #782F40;
            text-align: center;
            margin-bottom: 4px;
        }

        .power-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .power-btn {
            background: white;
            border: 3px solid #28a745;
            border-radius: 8px;
            padding: 8px;
            font-size: 10px;
            font-weight: bold;
            color: #28a745;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .power-btn:hover {
            background: #28a745;
            color: white;
            transform: scale(1.02);
        }

        .power-btn.off {
            border-color: #dc3545;
            color: #dc3545;
        }

        .power-btn.off:hover {
            background: #dc3545;
            color: white;
        }

        .volume-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 12px;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 6px;
        }

        .mic-control {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 8px;
        }

        .control-label {
            font-size: 9px;
            font-weight: bold;
            color: #782F40;
            margin-bottom: 4px;
        }

        .volume-slider {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: #ddd;
            border-radius: 5px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: #782F40;
            cursor: pointer;
            border-radius: 50%;
        }

        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #782F40;
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }

        .mute-btn {
            background: #782F40;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 5px 10px;
            cursor: pointer;
            font-weight: bold;
            font-size: 9px;
            transition: all 0.2s;
        }

        .mute-btn:hover {
            background: #5a2330;
        }

        .mute-btn.muted {
            background: #dc3545;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
                grid-template-rows: 1fr auto;
            }
            
            .control-panel {
                max-height: 350px;
            }
        }
      
        /* === Disabled Button Styles === */

        /* General rule for all buttons */
        button:disabled {
            opacity: 0.6;             /* slightly faded */
            cursor: not-allowed;      /* blocked cursor */
            filter: grayscale(40%);   /* tone down icons if present */
            transition: all 0.2s ease;
        }

        /* Projector control buttons */
        .control-btn:disabled {
            background: #ccc;         /* dull background */
            color: #666;              /* muted text */
            border: 1px solid #aaa;
        }

        /* Power buttons specifically */
        #powerOn:disabled {
            background: #28a74580;    /* faded green */
            color: #f0f0f0;
        }

        #powerOff:disabled {
            background: #dc354580;    /* faded red */
            color: #f0f0f0;
        }

				/* Loading Screen preview */      
        .preview-screen .loading-overlay{position:absolute;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.35);backdrop-filter:blur(1px);z-index:2}
        .preview-screen .spinner{width:46px;height:46px;border:4px solid #ffffff88;border-top-color:#fff;border-radius:50%;animation:spin .9s linear infinite}
        .preview-screen.is-loading .loading-overlay{display:flex}
        @keyframes spin{to{transform:rotate(360deg)}}
        @media (prefers-reduced-motion: reduce){.preview-screen .spinner{animation:none}}

        /* Background images for preview screens */
        .preview-screen.desktop   { background: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_p-72rMY56AoHEOV0AjO5qoJphB4Th2mUSA&s') center/cover no-repeat; }
        .preview-screen.laptop    { background: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ8Urb8rFwF_mA2bM3wdPoyA_gqW5cK2rwLEA&s') center/cover no-repeat; }
        .preview-screen.doccam    { background: url('https://i.ytimg.com/vi/BzjejJyTr8Y/hq720.jpg?sqp=-oaymwE7CK4FEIIDSFryq4qpAy0IARUAAAAAGAElAADIQj0AgKJD8AEB-AH-CYAC0AWKAgwIABABGGUgZShlMA8=&rs=AOn4CLAHR6k_P57rdXjR55YIRVH7fsiJRw') center/cover no-repeat; }
        .preview-screen.wireless  { background: url('https://cdsassets.apple.com/live/7WUAS350/images/macos/sequoia/macos-sequoia-ios-18-iphone-mirroring-window-with-controls.png') center/cover no-repeat; }
        .preview-screen.bluray    { background: url('images/bluray.jpg') center/cover no-repeat; }
        .preview-screen.camera    { background: url('images/camera.jpg') center/cover no-repeat; }
      
      .header-left {
    flex: 1;
    display: flex;
    justify-content: center;
}
 
      

.fsu-banner {
    height: 120px;
    width: auto;
    max-width: none;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
}

.header {
    width: 100%;
}
      
    </style>
</head>
<body>
    <div class="header">
    <div class="header-left">
        <img src="https://i.ibb.co/YBM1JKvT/Final-try-FSU.png" alt="FSU Classroom Control" class="fsu-banner">
    </div>
    <div class="header-right">
        <div class="time" id="currentTime">Oct 5, 2025 12:00 PM</div>
        <button class="help-btn" id="helpBtn">
            <span style="font-size: 20px;">❓</span>
            Help
        </button>
    </div>
</div>

    <div class="help-modal" id="helpModal">
        <div class="help-content">
            <button class="close-btn" id="closeBtn">×</button>
            <h2>How to use the Crestron Touch Screen Panels</h2>
            <p>The following information is a detailed explanation of how to use the Crestron touch panel interface in Technology-Enhanced Classrooms.</p>
            
            <h3>Main Control Page</h3>
            <ul>
                <li>From here, you will control the majority of the system.</li>
                <li>The projector's on and off controls are located in the Power Control section.</li>
                <li>The buttons to change input between the Doc Cam, Computer, BLURAY/DVD, Camera, and Laptop are in the Input Sources section.</li>
                <li>To view the selected input in either preview panel, select an input source first.</li>
                <li>To project a preview, select a technology and then the <strong>project</strong> button for the desired screen (left or right).</li>
            </ul>

            <h3>Projector On/Off Confirmation</h3>
            <ul>
                <li>A confirmation prompt displays upon powering the projectors on or off from the main panel.</li>
            </ul>

            <h3>Projector Warmup Screen</h3>
            <ul>
                <li>The screen displays as the projector warms up. No other inputs will be available for this short duration.</li>
            </ul>

            <h3>BLURAY/DVD Control Screen</h3>
            <ul>
                <li>Select the BLURAY input button to access the Blu-ray/DVD player.</li>
                <li>The Blu-ray/DVD player video input automatically appears in the preview panel.</li>
                <li>You will see the standard Blu-ray/DVD player controls.</li>
                <li>If you need other functionality that requires a remote, please request one from the AV department.</li>
            </ul>

            <h3>Camera Control Screen</h3>
            <ul>
                <li>Select the CAMERA input button to access the camera.</li>
                <li>The CAMERA has two preselected settings: <strong>PRESET 1</strong> and <strong>PRESET 2</strong>.</li>
                <li>You may choose to preview or project the camera by selecting the CAMERA input, then selecting a preset, then pressing <strong>PROJECT</strong>.</li>
            </ul>

            <h3>Display Control</h3>
            <ul>
                <li>Use <strong>Preview</strong> to see an input before displaying it.</li>
                <li>Use <strong>Project</strong> to send the input to the left or right projector.</li>
                <li>Use <strong>Blank</strong> to temporarily hide a projector display.</li>
            </ul>

            <h3>Audio Control</h3>
            <ul>
                <li>The system automatically switches audio to match your selected input source.</li>
                <li>Use the volume slider to adjust speaker volume.</li>
                <li>Use the Mute button to quickly silence audio output.</li>
            </ul>
        </div>
    </div>

    <div class="main-content">
        <div class="preview-section">
            <div class="preview-header">
                <div class="preview-label">Display Preview</div>
                <div class="audio-indicator">
                    <span>🔊</span>
                    <span id="audioSource">Desktop PC</span>
                </div>
            </div>
            <div class="preview-container">
                <div class="preview-screen" id="leftScreen">
                    <div class="screen-header">
                        <div class="screen-title">Left Projector</div>
                        <div class="screen-status" id="leftStatus">Ready</div>
                    </div>
                    <div class="screen-source" id="leftSource">No Input</div>
                    <!-- Loading spinner overlay (shown during warm-up) -->         
                    <div class="loading-overlay" aria-hidden="true">
                        <div class="spinner" role="status" aria-label="Warming up…"></div>
                 	  </div>
                </div>
                <div class="preview-screen" id="rightScreen">
                    <div class="screen-header">
                        <div class="screen-title">Right Projector</div>
                        <div class="screen-status" id="rightStatus">Ready</div>
                    </div>
                    <div class="screen-source" id="rightSource">No Input</div>
                    <!-- Loading spinner overlay (shown during warm-up) -->         
                    <div class="loading-overlay" aria-hidden="true">
                        <div class="spinner" role="status" aria-label="Warming up…"></div>
                 	  </div>
                </div>
            </div>
        </div>

        <div class="control-panel">
            <div class="control-section sources">
                <div class="section-title">Input Sources</div>
                <div class="button-grid triple">
                    <button class="control-btn" data-source="Desktop PC">
                        Desktop PC
                        <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424895392503566488/desktop_pc.png?ex=68e59cbe&is=68e44b3e&hm=0f8e22ab1e24236ae48036f8a3ccb2ddba5d032362fabeddfda20c4f86c8fc44&=&format=webp&quality=lossless&width=960&height=960" alt="desktop_pc" width="30" height="30" style="margin-left: 6px;"></span>
                    </button>
                    <button class="control-btn" data-source="Laptop">
                        Laptop
                        <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424919092539822151/laptop.png?ex=68e5b2d1&is=68e46151&hm=1e5f206640e675f0699a5028a1459fbb0813ddb4b682b20ef44735e09ae167c0&=&format=webp&quality=lossless&width=960&height=960" alt="laptop" width="30" height="30" style="margin-left: 6px;"></span>
                    </button>
                    <button class="control-btn" data-source="Document Camera">
                        Doc Cam
                        <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424919566206632066/doc_cam.png?ex=68e5b342&is=68e461c2&hm=66b45f38e288f4ca921ee4c04dc44b5abfc9631070496a4dcaeb97cb017826b5&=&format=webp&quality=lossless&width=960&height=960" alt="doc cam" width="30" height="30" style="margin-left: 6px;"></span>
                    </button>
                    <button class="control-btn" data-source="Wireless Stream">
                        Wireless
                        <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424921953436831927/wireless.png?ex=68e5b57b&is=68e463fb&hm=4f4462a4ae481ba897bab516c913e3c2fbc7f66c36c806fb924b9a1e5c9ef19e&=&format=webp&quality=lossless&width=960&height=960" alt="wireless" width="30" height="30" style="margin-left: 6px;"></span>
                    </button>
                    <button class="control-btn" data-source="Blu-ray Player">
                        Blu-ray
                        <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424922705467150336/bluray.png?ex=68e5b62e&is=68e464ae&hm=0a69661fa1329786600b808e2219618ddf0c0724046aa369707a4437e5687163&=&format=webp&quality=lossless&width=960&height=960" alt="bluray" width="30" height="30" style="margin-left: 3px;"></span>
                    </button>
                    <button class="control-btn" data-source="Camera Feed">
                        Camera
                        <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424922698177581169/camera.png?ex=68e5b62d&is=68e464ad&hm=c70f57fe7902971511174498596dfc3e36b2d062e2724ab595862b5732d73eda&=&format=webp&quality=lossless&width=960&height=960" alt="camera" width="30" height="30" style="margin-left: 6px;"></span>
                    </button>
                </div>
            </div>

            <div class="control-section display">
                <div class="section-title">Display Control</div>
                <div class="display-controls">
                    <div>
                        <div class="group-label">Left Screen</div>
                        <div class="display-group">
                            <button class="control-btn" data-action="left-preview">
                                Preview
                                <span class="icon">👁️</span>
                            </button>
                            <button class="control-btn" data-action="left-project">
                                Project
                                <span class="icon">▶️</span>
                            </button>
                            <button class="control-btn" data-action="left-mute">
                                Hide
                                <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424922677323370507/hide.png?ex=68e5b628&is=68e464a8&hm=60616dcba2d3dfe2261ba2fc4498f9a311b3cc032c249ca9216b27ad112fc87e&=&format=webp&quality=lossless&width=960&height=960" alt="hide" width="30" height="30" style="margin-left: 0px;"></span>
                            </button>
                            <button class="control-btn" data-action="left-freeze">
                                Freeze
                                <span class="icon">❄️</span>
                            </button>
                        </div>
                    </div>
                    <div>
                        <div class="group-label">Right Screen</div>
                        <div class="display-group">
                            <button class="control-btn" data-action="right-preview">
                                Preview
                                <span class="icon">👁️</span>
                            </button>
                            <button class="control-btn" data-action="right-project">
                                Project
                                <span class="icon">▶️</span>
                            </button>
                            <button class="control-btn" data-action="right-mute">
                                Hide
                                <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424922677323370507/hide.png?ex=68e5b628&is=68e464a8&hm=60616dcba2d3dfe2261ba2fc4498f9a311b3cc032c249ca9216b27ad112fc87e&=&format=webp&quality=lossless&width=960&height=960" alt="hide" width="30" height="30" style="margin-left: 0px;"></span>
                            </button>
                            <button class="control-btn" data-action="right-freeze">
                                Freeze
                                <span class="icon">❄️</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="control-section camera">
                <div class="section-title">Camera</div>
                <div class="button-grid single">
                    <button class="control-btn" data-action="camera-preset-1">
                        Preset 1
                        <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424922669068980356/preset_1.png?ex=68e5b626&is=68e464a6&hm=ba9c3203c14631b7d42ee341e64aa7f54d7dac0865851fd87cbdce4ad88b0326&=&format=webp&quality=lossless&width=960&height=960" alt="preset1" width="30" height="30" style="margin-left: 1px;"></span>
                    </button>
                    <button class="control-btn" data-action="camera-preset-2">
                        Preset 2
                        <span class="icon"><img src="https://media.discordapp.net/attachments/1398867678273212497/1424924199247544331/camera_preset_2.png?ex=68e5b792&is=68e46612&hm=a750d49489a03beab1a73329594467386e5461d7f277fc84e3b98b1cb5c0d920&=&format=webp&quality=lossless&width=960&height=960" alt="preset2" width="30" height="30" style="margin-left: 1px;"></span>
                    </button>
                </div>
            </div>

            <div class="control-section audio">
                <div class="section-title">Audio Source</div>
                <div class="button-grid single">
                    <button class="control-btn active" data-action="listen">
                        <span id="listenToLabel">Listening: Desktop PC</span>
                        <span class="icon">🎧</span>
                    </button>
                </div>
            </div>

            <div class="control-section volume">
                <div class="section-title">Volume Control</div>
                <div>
                    <div class="control-label">Speaker Volume</div>
                    <div class="volume-control">
                        <span style="font-size: 16px;">🔊</span>
                        <input type="range" class="volume-slider" min="0" max="100" value="50" id="volumeSlider">
                        <span id="volumeLevel" style="font-size: 10px; font-weight: bold; color: #782F40; min-width: 32px;">50%</span>
                        <button class="mute-btn" id="muteBtn">Mute</button>
                    </div>
                </div>
                <div style="margin-top: 8px;">
                    <div class="control-label">Microphone Level</div>
                    <div class="mic-control">
                        <span style="font-size: 16px;">🎤</span>
                        <input type="range" class="volume-slider" min="0" max="100" value="50" id="micSlider">
                        <span id="micLevel" style="font-size: 10px; font-weight: bold; color: #782F40; min-width: 32px;">50%</span>
                        <button class="mute-btn" id="micMuteBtn">Mute</button>
                    </div>
                </div>
            </div>

            <div class="control-section power">
                <div class="section-title">Power Control</div>
                <div class="power-section">
                    <button class="power-btn" id="powerOn">
                        <span>⚡</span>
                        Power On
                    </button>
                    <button class="power-btn off" id="powerOff">
                        <span>🔌</span>
                        Power Off
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const DEFAULT_AUDIO_SOURCE = 'Desktop PC';

        // State management
        let state = {
            selectedSource: null,
            leftProjector: null,
            rightProjector: null,
            audioSource: DEFAULT_AUDIO_SOURCE,
            volume: 50,
            isMuted: false,
            isPowerOn: false
        };

        /* === Tiny helpers (must be defined before listeners use them) === */
        function setPreviewLoading(screenEl, isLoading) {
            if (!screenEl) return;
            screenEl.classList.toggle('is-loading', isLoading);
            screenEl.setAttribute('aria-busy', isLoading ? 'true' : 'false');
        }

        function disableDisplayControls(disabled) {
            document.querySelectorAll(
                '[data-action="left-preview"],[data-action="left-project"],[data-action="left-mute"],[data-action="left-freeze"],' +
                '[data-action="right-preview"],[data-action="right-project"],[data-action="right-mute"],[data-action="right-freeze"]'
            ).forEach(btn => btn.disabled = disabled);
        }

      
      	//Checks status of power
        function updatePowerUI() {
            const onBtn  = document.getElementById('powerOn');
            const offBtn = document.getElementById('powerOff');

            if (state.isPowerOn) {
                onBtn.disabled  = true;   // can’t press ON again
                offBtn.disabled = false;  // can power OFF
                disableDisplayControls(false); // preview/project/blank enabled
            } else {
                onBtn.disabled  = false;  // can power ON
                offBtn.disabled = true;   // can’t press OFF if already off
                disableDisplayControls(true);  // lock display controls while off
            }
        }

        // Map your source labels -> CSS class names
        const SOURCE_CLASS = {
            'Desktop PC':     'desktop',
            'Laptop':         'laptop',
            'Document Camera':'doccam',
            'Wireless Stream':'wireless',
            'Camera Feed':    'camera'
        };

        // Utility: apply the correct background class to a screen
        function applySourceBg(screenEl, sourceLabel) {
            if (!screenEl) return;
            // remove any previous source classes
            screenEl.classList.remove(...Object.values(SOURCE_CLASS));
            // add new class if we have a mapping
            const cls = SOURCE_CLASS[sourceLabel];
            if (cls) screenEl.classList.add(cls);
        }
      
        function updateAudioSourceLabels(source) {
            document.getElementById('audioSource').textContent = source;
            document.getElementById('listenToLabel').textContent = `Listening: ${source}`;
        }

        // Help modal
        const helpBtn = document.getElementById('helpBtn');
        const helpModal = document.getElementById('helpModal');
        const closeBtn = document.getElementById('closeBtn');

        helpBtn.addEventListener('click', function() {
            helpModal.classList.add('show');
        });

        closeBtn.addEventListener('click', function() {
            helpModal.classList.remove('show');
        });

        helpModal.addEventListener('click', function(e) {
            if (e.target === helpModal) {
                helpModal.classList.remove('show');
            }
        });

        // Confirmation modal
        function showConfirmation(message, onConfirm) {
            const confirmed = confirm(message);
            if (confirmed && onConfirm) {
                onConfirm();
            }
        }

        // Update time
        function updateTime() {
            const now = new Date();
            const options = { 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric', 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            };
            document.getElementById('currentTime').textContent = now.toLocaleString('en-US', options);
        }
        updateTime();
        setInterval(updateTime, 1000);

        // Source selection
        document.querySelectorAll('[data-source]').forEach(btn => {
            btn.addEventListener('click', function() {
                const source = this.getAttribute('data-source');
                const isActive = this.classList.contains('active');

                if (isActive) {
                    this.classList.remove('active');
                    state.selectedSource = null;
                    state.audioSource = DEFAULT_AUDIO_SOURCE;
                    updateAudioSourceLabels(state.audioSource);
                    return;
                }

                state.selectedSource = source;

                // Update button states
                document.querySelectorAll('[data-source]').forEach(b => b.classList.remove('active'));
                this.classList.add('active');

                // Automatically update audio source to match selected input
                state.audioSource = source;
                updateAudioSourceLabels(state.audioSource);
            });
        });

        // Preview buttons
        document.querySelector('[data-action="left-preview"]').addEventListener('click', function () {
            if (state.selectedSource && state.isPowerOn) {
                document.getElementById('leftSource').textContent  = `Preview: ${state.selectedSource}`;
                document.getElementById('leftStatus').textContent  = 'Preview';
                applySourceBg(document.getElementById('leftScreen'), state.selectedSource);
            } else if (!state.isPowerOn) {
                alert('Please power on the projectors first.');
            } else {
                alert('Please select an input source first.');
            }
        });

        document.querySelector('[data-action="right-preview"]').addEventListener('click', function () {
            if (state.selectedSource && state.isPowerOn) {
                document.getElementById('rightSource').textContent = `Preview: ${state.selectedSource}`;
                document.getElementById('rightStatus').textContent = 'Preview';
                applySourceBg(document.getElementById('rightScreen'), state.selectedSource);
            } else if (!state.isPowerOn) {
                alert('Please power on the projectors first.');
            } else {
                alert('Please select an input source first.');
            }
        });

        // Project buttons
        document.querySelector('[data-action="left-project"]').addEventListener('click', function () {
            if (state.selectedSource && state.isPowerOn) {
                state.leftProjector = state.selectedSource;
                document.getElementById('leftSource').textContent = state.selectedSource;
                document.getElementById('leftStatus').textContent = 'Projecting';
                const leftScreen = document.getElementById('leftScreen');
                leftScreen.classList.add('active');
                applySourceBg(leftScreen, state.selectedSource);
            } else if (!state.isPowerOn) {
                alert('Please power on the projectors first.');
            } else {
                alert('Please select an input source first.');
            }
        });

        document.querySelector('[data-action="right-project"]').addEventListener('click', function () {
            if (state.selectedSource && state.isPowerOn) {
                state.rightProjector = state.selectedSource;
                document.getElementById('rightSource').textContent = state.selectedSource;
                document.getElementById('rightStatus').textContent = 'Projecting';
                const rightScreen = document.getElementById('rightScreen');
                rightScreen.classList.add('active');
                applySourceBg(rightScreen, state.selectedSource);
            } else if (!state.isPowerOn) {
                alert('Please power on the projectors first.');
            } else {
                alert('Please select an input source first.');
            }
        });

// Blank buttons
        document.querySelector('[data-action="left-mute"]').addEventListener('click', function() {
            const leftScreen = document.getElementById('leftScreen');
            document.getElementById('leftSource').textContent = 'Blanked';
            document.getElementById('leftStatus').textContent = 'Hidden';
            leftScreen.classList.remove('active', 'desktop', 'laptop', 'doccam', 'wireless', 'bluray', 'camera');
        });

        document.querySelector('[data-action="right-mute"]').addEventListener('click', function() {
            const rightScreen = document.getElementById('rightScreen');
            document.getElementById('rightSource').textContent = 'Blanked';
            document.getElementById('rightStatus').textContent = 'Hidden';
            rightScreen.classList.remove('active', 'desktop', 'laptop', 'doccam', 'wireless', 'bluray', 'camera');
        });

        // Freeze buttons
        document.querySelector('[data-action="left-freeze"]').addEventListener('click', function() {
            if (state.leftProjector && state.isPowerOn) {
                document.getElementById('leftStatus').textContent = 'Frozen';
                alert('Left screen frozen. Current image will remain displayed.');
            } else if (!state.isPowerOn) {
                alert('Please power on the projectors first.');
            } else {
                alert('Please project something to the left screen first.');
            }
        });

        document.querySelector('[data-action="right-freeze"]').addEventListener('click', function() {
            if (state.rightProjector && state.isPowerOn) {
                document.getElementById('rightStatus').textContent = 'Frozen';
                alert('Right screen frozen. Current image will remain displayed.');
            } else if (!state.isPowerOn) {
                alert('Please power on the projectors first.');
            } else {
                alert('Please project something to the right screen first.');
            }
        });

        // Camera presets
        document.querySelector('[data-action="camera-preset-1"]').addEventListener('click', function() {
            if (state.selectedSource === 'Camera Feed') {
                alert('Camera moved to Preset 1 (Podium view)');
            } else {
                alert('Please select Camera input first.');
            }
        });

        document.querySelector('[data-action="camera-preset-2"]').addEventListener('click', function() {
            if (state.selectedSource === 'Camera Feed') {
                alert('Camera moved to Preset 2 (Audience view)');
            } else {
                alert('Please select Camera input first.');
            }
        });

        // Volume control
        const volumeSlider = document.getElementById('volumeSlider');
        const volumeLevel = document.getElementById('volumeLevel');
        const muteBtn = document.getElementById('muteBtn');

        volumeSlider.addEventListener('input', function() {
            state.volume = this.value;
            volumeLevel.textContent = this.value + '%';
            
            if (this.value > 0 && state.isMuted) {
                state.isMuted = false;
                muteBtn.textContent = 'Mute';
                muteBtn.classList.remove('muted');
            }
        });

        muteBtn.addEventListener('click', function() {
            state.isMuted = !state.isMuted;
            
            if (state.isMuted) {
                state.previousVolume = volumeSlider.value;
                volumeSlider.value = 0;
                volumeLevel.textContent = '0%';
                this.textContent = 'Unmute';
                this.classList.add('muted');
            } else {
                volumeSlider.value = state.previousVolume || 50;
                volumeLevel.textContent = volumeSlider.value + '%';
                this.textContent = 'Mute';
                this.classList.remove('muted');
            }
        });

        // Microphone control
        const micSlider = document.getElementById('micSlider');
        const micLevel = document.getElementById('micLevel');
        const micMuteBtn = document.getElementById('micMuteBtn');
        let isMicMuted = false;
        let previousMicLevel = 50;

        micSlider.addEventListener('input', function() {
            micLevel.textContent = this.value + '%';
            
            if (this.value > 0 && isMicMuted) {
                isMicMuted = false;
                micMuteBtn.textContent = 'Mute';
                micMuteBtn.classList.remove('muted');
            }
        });

        micMuteBtn.addEventListener('click', function() {
            isMicMuted = !isMicMuted;
            
            if (isMicMuted) {
                previousMicLevel = micSlider.value;
                micSlider.value = 0;
                micLevel.textContent = '0%';
                this.textContent = 'Unmute';
                this.classList.add('muted');
            } else {
                micSlider.value = previousMicLevel;
                micLevel.textContent = micSlider.value + '%';
                this.textContent = 'Mute';
                this.classList.remove('muted');
            }
        });

        // POWER ON
        document.getElementById('powerOn').addEventListener('click', function () {
            if (state.isPowerOn) return;      // already ON -> ignore
            // optimistically disable ON to prevent double-click spamming
            this.disabled = true;

            showConfirmation('Turn ON projectors?', () => {
                const leftScreen  = document.getElementById('leftScreen');
                const rightScreen = document.getElementById('rightScreen');
                const leftStatus  = document.getElementById('leftStatus');
                const rightStatus = document.getElementById('rightStatus');

                // warming up phase
                setPreviewLoading(leftScreen,  true);
                setPreviewLoading(rightScreen, true);
                leftStatus.textContent  = 'Warming up…';
                rightStatus.textContent = 'Warming up…';
                disableDisplayControls(true);

                setTimeout(() => {
                    state.isPowerOn = true;       // now ON
                    setPreviewLoading(leftScreen,  false);
                    setPreviewLoading(rightScreen, false);
                    leftStatus.textContent  = 'Ready';
                    rightStatus.textContent = 'Ready';
                    updatePowerUI();              // lock/unlock buttons accordingly
                }, 3000);
            }, () => {
                // user canceled -> restore previous enabled state
                updatePowerUI();
            });
        });

        // POWER OFF
        document.getElementById('powerOff').addEventListener('click', function () {
            if (!state.isPowerOn) return;     // already OFF -> ignore

            showConfirmation('Turn OFF projectors?', () => {
                state.isPowerOn = false;

                // reset UI
                document.getElementById('leftSource').textContent  = 'No Input';
                document.getElementById('rightSource').textContent = 'No Input';
                document.getElementById('leftStatus').textContent  = 'Off';
                document.getElementById('rightStatus').textContent = 'Off';
                document.getElementById('leftScreen').classList.remove('active','is-loading');
                document.getElementById('rightScreen').classList.remove('active','is-loading');

                // also clear any “projecting” state you track
                state.leftProjector  = null;
                state.rightProjector = null;

                updatePowerUI();                 // disables OFF, enables ON, locks controls
            });
        });
    </script>
</body>
</html>
